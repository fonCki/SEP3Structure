@using Entities.Model
@using BlazorApp.Shared.MicroComponents

<main class="main-component" onmouseover="@MouseEnter" onmouseleave="@MouseLeft">
    <div class="left-half">
        <div class="avatar"><Avatar size="Avatar.Size.Medium"/></div>
        <div class="name-and-message">
            <p class="nickname">Huguito</p>
            <p class="message">@_message.Body</p>
        </div>
    </div>
    <div class="date-and-time">
        <div class="date">@string.Format("{0:hh:mm tt}", _message.Created)</div>
        <div class="circle @(mouse ? "drop" : "new")">
            @if (mouse) {
                <ToolTip Text="Close" Pos="ToolTip.Position.Left">
                    <div><span class="iconify" data-icon="ep:arrow-down"></span></div>
                </ToolTip>
            }
            else {
                <div><span>1</span></div>
            }
        </div>
    </div>
</main>

@code {

    public Message? _message { get; set; } = new Message(DateTime.Now,
         new User("Hug sdfg sdfg  sdfg ssdfg sdf sdfg iot", "kajsdf", "Asdf", "ASDf"), "89 asdf a asdf asdg ds sdf sdfg dfsgh dfgj sdfg sdfg sdfg sdfg af sdf sdfg sdfg sdfg sdfg sgdfv sdfg sfd gscv12");

    List<string> items = new List<string>() {"Archive chat", "Mute Notifications", "Delete Chat", "Pin chat", "Mark as unread"};

    private string premessage;

    private bool mouse = false;
    
    protected override async Task OnInitializedAsync() {
       // premessage = _message.Body.Substring(0, 27) + "...";
    }

    private void MouseEnter() {
        mouse = true;
    }

    private void MouseLeft() {
        mouse = false;
    }

}
